(this.webpackJsonpnetflix=this.webpackJsonpnetflix||[]).push([[0],{22:function(e,t,i){},41:function(e,t,i){},43:function(e,t,i){"use strict";i.r(t);var n=i(2),a=i.n(n),s=i(17),c=i.n(s),o=(i(22),i(3)),r=i(4),l=i(6),u=i(5),d=i(7),h=i.n(d),v=(i(41),i(0)),j=function(e){Object(l.a)(i,e);var t=Object(u.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this,e)).handleClick=function(){n.props.onConfirm(n.state.inputValue)},n.handleKeyDown=function(e){"Enter"===e.key&&n.props.onConfirm(n.state.inputValue)},n.state={placeholder:"Cherchez un film",inputValue:""},n}return Object(r.a)(i,[{key:"handleChange",value:function(e){this.setState({inputValue:e.target.value})}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("input",{type:"text",className:"search-bar",name:"searchInput",placeholder:this.state.placeholder,onChange:this.handleChange.bind(this),onKeyPress:this.handleKeyDown,value:this.state.inputValue}),Object(v.jsx)("button",{className:"search-bar_submit",onClick:this.handleClick,children:"Go"})]})}}]),i}(n.Component),b=function(e){return Object(v.jsx)("div",{children:e.video.youtubeVideoKey?Object(v.jsx)("iframe",{width:"700",height:"394",src:"https://www.youtube.com/embed/".concat(e.video.youtubeVideoKey),title:"YouTube video player",frameBorder:"0"}):Object(v.jsx)("img",{src:"https://image.tmdb.org/t/p/w780".concat(e.video.backdrop_path),width:"700",height:"394",alt:e.video.title})})},m=function(e){var t=e.movie;return Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"detail-header",children:[Object(v.jsx)("h2",{children:t.title}),Object(v.jsxs)("h3",{className:"muted",children:["Sortie le ",t.release_date]})]}),Object(v.jsx)("p",{children:t.overview})]})},p=function(e){var t=e.movie;return Object(v.jsxs)("li",{className:"video-list-item",onClick:function(){return e.callback(t)},children:[Object(v.jsx)("img",{src:"".concat("https://image.tmdb.org/t/p/w500").concat(t.poster_path),width:"80",alt:""}),Object(v.jsxs)("div",{className:"video-list-item-aside",children:[Object(v.jsx)("h4",{className:"video-list-item-title",children:t.title}),Object(v.jsxs)("div",{className:"muted small video-list-item-rating",children:["Sortie : ",t.release_date]}),Object(v.jsxs)("div",{className:"muted video-list-item-rating",children:["Note : ",t.vote_average]})]})]})},f=function(e){var t=e.movieList;return Object(v.jsxs)("div",{className:"movie_list_section",children:[Object(v.jsx)("h3",{className:"mt-0",children:"Films recommand\xe9s"}),Object(v.jsx)("div",{className:"movie_list",children:Object(v.jsx)("ul",{children:t.map((function(t){return Object(v.jsx)(p,{movie:t,callback:e.callback},t.id)}))})})]})},O="api_key=b1bb009f89a909c0ae0b65bc17104e0e",x="https://api.themoviedb.org/3/",y=function(e){Object(l.a)(i,e);var t=Object(u.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this,e)).setCurrentMovie=function(e){n.setState({currentMovie:e},(function(){n.applyVideoToCurrentMovie()}))},n.handleSearchConfirm=function(e){console.log("searched value",e),n.searchMovie(e)},n.state={movieList:[],currentMovie:{}},n}return Object(r.a)(i,[{key:"componentWillMount",value:function(){this.initMovies()}},{key:"initMovies",value:function(){h.a.get("".concat(x).concat("discover/movie?language=fr&sort_by=popularity.desc&include_adult=false&append_to_response=images","&").concat(O)).then(function(e){var t;this.setState({movieList:e.data.results,currentMovie:e.data.results[(t=19,Math.floor(Math.random()*t))]},(function(){this.applyVideoToCurrentMovie()}))}.bind(this))}},{key:"applyVideoToCurrentMovie",value:function(){h.a.get("".concat(x,"/movie/").concat(this.state.currentMovie.id,"/videos?").concat(O)).then(function(e){if(e.data.results.length){var t=this.state.currentMovie,i=e.data.results[0].key;t.youtubeVideoKey=i,t.youtubeVideoUrl="https://www.youtube.com/watch?v="+i,this.setState({currentMovie:t})}}.bind(this))}},{key:"searchMovie",value:function(e){h.a.get("".concat(x).concat("search/movie","?").concat(O,"&page=1&include_adult=false&language=fr&query=").concat(e)).then(function(e){var t=this;if(e.data.results.length){var i=e.data.results[0],n=this.state.currentMovie;i.id!==n.id&&this.setState({currentMovie:e.data.results[0]},(function(){t.applyVideoToCurrentMovie()}));var a=e.data.results;a.sort((function(e,t){return e.popularity<t.popularity})),this.setState({movieList:a})}}.bind(this))}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsxs)("header",{children:[Object(v.jsx)("h1",{children:"My Netflix"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j,{onConfirm:this.handleSearchConfirm}),Object(v.jsx)("a",{href:"#",onClick:this.initMovies.bind(this),children:"Afficher des recommandations"})]})]}),Object(v.jsxs)("div",{className:"container",children:[Object(v.jsxs)("aside",{children:[Object(v.jsx)(b,{video:this.state.currentMovie}),Object(v.jsx)(m,{movie:this.state.currentMovie})]}),Object(v.jsx)(f,{movieList:this.state.movieList,callback:this.setCurrentMovie})]})]})}}]),i}(n.Component),g=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,44)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;i(e),n(e),a(e),s(e),c(e)}))};c.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(y,{})}),document.getElementById("root")),g()}},[[43,1,2]]]);
//# sourceMappingURL=main.16d437a5.chunk.js.map